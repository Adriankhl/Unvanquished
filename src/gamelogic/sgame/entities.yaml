general:
    common_entity_attributes:
        - name: oldEnt
          type: struct gentity_s*

messages:
    # Make all components export their networked state.
    PrepareNetCode:

    # Sent unconditionally once every frame.
    Think:
        - name: timeDelta
          type: int

    # ######################### #
    # Component-affine messages #
    # ######################### #
    # Every component can listen to them but few (and atleast one) will.
    # TODO: Define them inside their affine component's definition below.

    FreeAt:
        - name: freeTime
          type: int

    Ignite:
        - name: fireStarter
          type: gentity_t*

    Extinguish:
        - name: immunityTime
          type: int

    Heal:
        - name: amount
          type: float
        - name: source
          type: gentity_t*

    Damage:
        - name: amount
          type: float
        - name: source
          type: gentity_t*
        - name: location
          type: Util::optional<Vec3>
        - name: direction
          type: Util::optional<Vec3>
        - name: flags
          type: int
        - name: meansOfDeath
          type: meansOfDeath_t

components:
    DeferredFreeing:
        messages:
            - FreeAt

    Ignitable:
        parameters:
            freeOnExtinguish: bool
        messages:
            - PrepareNetCode
            - Think
            - Ignite
            - Extinguish

    Health:
        parameters:
            maxHealth: float
        messages:
            - PrepareNetCode
            - Heal
            - Damage

    Armor:

entities:
    Empty:
        components:

    Fire:
        components:
            Ignitable:
                freeOnExtinguish: true
            DeferredFreeing:

    AlienBuildable:
        components:
            Ignitable:
                freeOnExtinguish: false
            Health:

# vi:ts=4:et:ai
